<div class="div-list-vehicles">
    <div class="div-search-new">
        <form class="form" [formGroup]="formSearch">
            <mat-form-field floatLabel="always" appearance="outline" color="primary">
                <mat-label>Buscar por:</mat-label>
                <mat-select formControlName="searchBy" required #field>
                    <mat-option value="">Seleccione campo a buscar...</mat-option>
                    <mat-option value="brand">Marca</mat-option>
                    <mat-option value="model">Modelo</mat-option>
                    <mat-option value="color">Color</mat-option>
                    <mat-option value="transmission">Transmisión</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="form-group" appearance="outline">
                <input matInput type="search" formControlName="inputSearch" placeholder="Dato a buscar" name="input"
                    (keyup)="searchVehicle()">
            </mat-form-field>
        </form>
        <app-button [name]="'Agregar vehículo'" (clicked)="navigateTo('vehicle/create')"></app-button>
    </div>
    <div class="mat-elevation-z8 div-table-vehicles">
        <table mat-table [dataSource]="dataSource" class="vehicle-table">

            <ng-container matColumnDef="poster">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let vehicle">
                    @if(vehicle.poster){
                    <img mat-card-image [src]="vehicle.poster" [alt]="vehicle.model">
                    }@else{
                    <img mat-card-image src="../images/defaultCar.png" [alt]="vehicle.model">
                    }
                </td>
            </ng-container>

            <ng-container matColumnDef="brand">
                <th mat-header-cell *matHeaderCellDef> Marca </th>
                <td mat-cell *matCellDef="let vehicle"> {{vehicle.brand}} </td>
            </ng-container>

            <ng-container matColumnDef="model">
                <th mat-header-cell *matHeaderCellDef> Modelo </th>
                <td mat-cell *matCellDef="let vehicle"> {{vehicle.model}} </td>
            </ng-container>

            <ng-container matColumnDef="year">
                <th mat-header-cell *matHeaderCellDef> Año </th>
                <td mat-cell *matCellDef="let vehicle"> {{vehicle.year}} </td>
            </ng-container>

            <ng-container matColumnDef="plateNumber">
                <th mat-header-cell *matHeaderCellDef> Número de placa </th>
                <td mat-cell *matCellDef="let vehicle"> {{vehicle.plateNumber}} </td>
            </ng-container>

            <ng-container matColumnDef="color">
                <th mat-header-cell *matHeaderCellDef> Color </th>
                <td mat-cell *matCellDef="let vehicle"> {{vehicle.color}} </td>
            </ng-container>

            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef> Tipo </th>
                <td mat-cell *matCellDef="let vehicle"> {{vehicle.type}} </td>
            </ng-container>

            <ng-container matColumnDef="transmission">
                <th mat-header-cell *matHeaderCellDef> Transmisión </th>
                <td mat-cell *matCellDef="let vehicle"> {{vehicle.transmission}} </td>
            </ng-container>
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let vehicle" class="actions-vehicle">
                    <div class="div-cell-buttons">
                        <app-button [name]="'Actualizar'" (clicked)="updateVehicle(vehicle)"></app-button>
                        <app-button [name]="'Eliminar'" (clicked)="deleteVehicle(vehicle)"></app-button>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of vehicles">
        </mat-paginator>
    </div>
</div>